<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Administração - Agente Cidadão</title>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- CSS -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/animations.css">

    <style>
        body {
            background-color: var(--color-bg-alt);
        }

        .admin-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: var(--spacing-2xl);
        }

        .admin-header {
            margin-bottom: var(--spacing-2xl);
        }

        .admin-header h1 {
            color: var(--color-primary-dark);
            margin-bottom: var(--spacing-sm);
        }

        .admin-header .breadcrumb {
            color: var(--color-text-secondary);
            font-size: var(--font-size-sm);
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--spacing-lg);
            margin-bottom: var(--spacing-2xl);
        }

        .metric-card {
            background: white;
            border-radius: var(--radius-xl);
            padding: var(--spacing-xl);
            box-shadow: var(--shadow-sm);
            transition: all var(--transition-base);
            border: 1px solid var(--color-border);
        }

        .metric-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .metric-card .metric-icon {
            width: 48px;
            height: 48px;
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: var(--spacing-md);
        }

        .metric-card.primary .metric-icon {
            background: linear-gradient(135deg, var(--color-primary), var(--color-primary-light));
        }

        .metric-card.success .metric-icon {
            background: linear-gradient(135deg, #10B981, #34D399);
        }

        .metric-card.warning .metric-icon {
            background: linear-gradient(135deg, #F59E0B, #FBBF24);
        }

        .metric-card.info .metric-icon {
            background: linear-gradient(135deg, #3B82F6, #60A5FA);
        }

        .metric-card .metric-value {
            font-size: var(--font-size-3xl);
            font-weight: var(--font-weight-bold);
            color: var(--color-text);
            margin-bottom: var(--spacing-xs);
        }

        .metric-card .metric-label {
            font-size: var(--font-size-sm);
            color: var(--color-text-secondary);
            font-weight: var(--font-weight-medium);
        }

        .section-card {
            background: white;
            border-radius: var(--radius-xl);
            padding: var(--spacing-xl);
            box-shadow: var(--shadow-sm);
            margin-bottom: var(--spacing-xl);
            border: 1px solid var(--color-border);
        }

        .section-card h2 {
            color: var(--color-text);
            margin-bottom: var(--spacing-lg);
            font-size: var(--font-size-xl);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table thead {
            background-color: var(--color-bg-alt);
        }

        .data-table th {
            padding: var(--spacing-md);
            text-align: left;
            font-size: var(--font-size-sm);
            font-weight: var(--font-weight-semibold);
            color: var(--color-text-secondary);
            border-bottom: 1px solid var(--color-border);
        }

        .data-table td {
            padding: var(--spacing-md);
            border-bottom: 1px solid var(--color-border);
            font-size: var(--font-size-sm);
        }

        .data-table tbody tr:hover {
            background-color: var(--color-bg-alt);
        }

        .status-badge {
            display: inline-block;
            padding: var(--spacing-xs) var(--spacing-sm);
            border-radius: var(--radius-full);
            font-size: var(--font-size-xs);
            font-weight: var(--font-weight-semibold);
        }

        .status-badge.completed {
            background-color: #D1FAE5;
            color: #065F46;
        }

        .status-badge.pending {
            background-color: #FEF3C7;
            color: #92400E;
        }

        .status-badge.processing {
            background-color: #DBEAFE;
            color: #1E40AF;
        }

        .btn-action {
            padding: var(--spacing-xs) var(--spacing-sm);
            border: none;
            border-radius: var(--radius-md);
            font-size: var(--font-size-xs);
            cursor: pointer;
            transition: all var(--transition-base);
            background-color: var(--color-bg-alt);
            color: var(--color-text-secondary);
        }

        .btn-action:hover {
            background-color: var(--color-primary);
            color: white;
        }

        @media (max-width: 768px) {
            .data-table {
                font-size: var(--font-size-xs);
            }

            .data-table th,
            .data-table td {
                padding: var(--spacing-sm);
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="header-logo">
                <div class="header-logo-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M12 3a3 3 0 0 0-3 3v1m6-4a3 3 0 0 1 3 3v1m-9 8h9m-9 4h9"/>
                        <path d="M6 18h.01M18 18h.01"/>
                        <rect width="20" height="14" x="2" y="7" rx="2"/>
                    </svg>
                </div>
                <div class="header-logo-text">
                    <h1 data-i18n="header.title">Agente Cidadão</h1>
                    <p data-i18n="admin.title">Painel Administrativo</p>
                </div>
            </div>

            <nav class="header-nav">
                <a href="index.html" data-i18n="nav.chat">Chat</a>
                <a href="login.html" data-i18n="admin.logout">Sair</a>

                <div class="language-selector">
                    <button id="btn-pt" onclick="window.i18n.setLanguage('pt-br')" class="active">PT</button>
                    <button id="btn-es" onclick="window.i18n.setLanguage('es')">ES</button>
                </div>
            </nav>
        </div>
    </header>

    <!-- Container Principal -->
    <div class="admin-container">
        <!-- Header da Página -->
        <div class="admin-header">
            <h1 data-i18n="admin.dashboard">Dashboard</h1>
            <p class="breadcrumb">Admin / <span data-i18n="admin.dashboard">Dashboard</span></p>
        </div>

        <!-- Métricas -->
        <div class="metrics-grid">
            <div class="metric-card primary">
                <div class="metric-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                    </svg>
                </div>
                <div class="metric-value">1.247</div>
                <div class="metric-label" data-i18n="admin.metrics.total">Total de Consultas</div>
            </div>

            <div class="metric-card success">
                <div class="metric-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                    </svg>
                </div>
                <div class="metric-value">84</div>
                <div class="metric-label" data-i18n="admin.metrics.today">Consultas Hoje</div>
            </div>

            <div class="metric-card warning">
                <div class="metric-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
                        <circle cx="9" cy="7" r="4"/>
                        <path d="M22 21v-2a4 4 0 0 0-3-3.87"/>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                    </svg>
                </div>
                <div class="metric-value">342</div>
                <div class="metric-label" data-i18n="admin.metrics.users">Usuários Ativos</div>
            </div>

            <div class="metric-card info">
                <div class="metric-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"/>
                        <polyline points="12 6 12 12 16 14"/>
                    </svg>
                </div>
                <div class="metric-value">2.4s</div>
                <div class="metric-label" data-i18n="admin.metrics.avgtime">Tempo Médio de Resposta</div>
            </div>
        </div>

        <!-- Consultas Recentes -->
        <div class="section-card">
            <h2>
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
                </svg>
                <span data-i18n="admin.recent.title">Consultas Recentes</span>
            </h2>

            <table class="data-table">
                <thead>
                    <tr>
                        <th data-i18n="admin.table.id">ID</th>
                        <th data-i18n="admin.table.query">Pergunta</th>
                        <th data-i18n="admin.table.status">Status</th>
                        <th data-i18n="admin.table.time">Data/Hora</th>
                        <th data-i18n="admin.table.actions">Ações</th>
                    </tr>
                </thead>
                <tbody id="requests-table-body">
                    <!-- Dados mockados serão inseridos aqui -->
                </tbody>
            </table>
        </div>

        <!-- Logs do Sistema -->
        <div class="section-card">
            <h2>
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/>
                    <polyline points="14 2 14 8 20 8"/>
                </svg>
                <span data-i18n="admin.logs">Logs do Sistema</span>
            </h2>

            <table class="data-table">
                <thead>
                    <tr>
                        <th>Timestamp</th>
                        <th>Agente</th>
                        <th>Request ID</th>
                        <th>Status</th>
                        <th>Mensagem</th>
                    </tr>
                </thead>
                <tbody id="logs-table-body">
                    <!-- Dados mockados serão inseridos aqui -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="js/i18n.js"></script>

    <script>
        // Dados mockados para a tabela de consultas
        const mockRequests = [
            { id: 1001, query: 'Quais são os deputados de São Paulo?', status: 'completed', time: '2024-11-27 14:32' },
            { id: 1002, query: 'Despesas do deputado Eduardo Bolsonaro', status: 'completed', time: '2024-11-27 14:28' },
            { id: 1003, query: 'Projetos de lei sobre educação', status: 'processing', time: '2024-11-27 14:25' },
            { id: 1004, query: 'Histórico de votação de Tabata Amaral', status: 'completed', time: '2024-11-27 14:20' },
            { id: 1005, query: 'Gastos com combustível deputados MG', status: 'completed', time: '2024-11-27 14:15' },
            { id: 1006, query: 'Proposições sobre saúde', status: 'pending', time: '2024-11-27 14:10' }
        ];

        // Dados mockados para logs
        const mockLogs = [
            { timestamp: '14:32:45', agent: 'Orquestrador', requestId: 1001, status: 'completed', message: 'Delegando para 2 especialistas' },
            { timestamp: '14:32:42', agent: 'Político', requestId: 1001, status: 'working', message: 'Consultando bases de dados...' },
            { timestamp: '14:32:40', agent: 'Orquestrador', requestId: 1001, status: 'working', message: 'Analisando pergunta...' },
            { timestamp: '14:28:15', agent: 'Sintetizador', requestId: 1002, status: 'completed', message: 'Resposta pronta!' },
            { timestamp: '14:28:10', agent: 'Fiscal', requestId: 1002, status: 'completed', message: 'Total: R$ 127.450' }
        ];

        // Popular tabela de consultas
        const requestsTableBody = document.getElementById('requests-table-body');
        mockRequests.forEach(req => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>#${req.id}</td>
                <td>${req.query}</td>
                <td><span class="status-badge ${req.status}">${req.status}</span></td>
                <td>${req.time}</td>
                <td>
                    <button class="btn-action" onclick="alert('Ver detalhes do request #${req.id}')" data-i18n="general.view">Visualizar</button>
                </td>
            `;
            requestsTableBody.appendChild(row);
        });

        // Popular tabela de logs
        const logsTableBody = document.getElementById('logs-table-body');
        mockLogs.forEach(log => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${log.timestamp}</td>
                <td>${log.agent}</td>
                <td>#${log.requestId}</td>
                <td><span class="status-badge ${log.status}">${log.status}</span></td>
                <td>${log.message}</td>
            `;
            logsTableBody.appendChild(row);
        });
    </script>
</body>
</html>
