{
  "name": "Agente CidadÃ£o - Multi-Agentes",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "chat",
        "responseMode": "responseNode",
        "options": {}
      },
      "id": "3c9454b2-5775-4e2b-aceb-498e5c14cc7f",
      "name": "Webhook Chat",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [
        -1312,
        96
      ],
      "webhookId": "a23384a3-5018-4dfd-a6cc-e9bcd5eded3f"
    },
    {
      "parameters": {
        "dataType": "string",
        "value1": "={{ $json.agentes }}",
        "rules": {
          "rules": [
            {
              "value2": "legislativo"
            },
            {
              "value2": "politico",
              "output": 1
            },
            {
              "value2": "fiscal",
              "output": 2
            }
          ]
        }
      },
      "id": "d7ccc8ae-fb2f-43e3-8545-0ce54046bb27",
      "name": "Router",
      "type": "n8n-nodes-base.switch",
      "typeVersion": 1,
      "position": [
        -192,
        80
      ]
    },
    {
      "parameters": {
        "tableId": "agent_logs",
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": "request_id",
              "fieldValue": "={{ $('Webhook Chat').item.json.body.record.id }}"
            },
            {
              "fieldId": "agent_name",
              "fieldValue": "Legislativo"
            },
            {
              "fieldId": "message",
              "fieldValue": "Iniciando anÃ¡lise..."
            },
            {
              "fieldId": "status",
              "fieldValue": "info"
            }
          ]
        }
      },
      "id": "5bc93e94-b912-4555-8b5c-30b6f21d14ee",
      "name": "Log: Leg Start",
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        -48,
        -48
      ],
      "credentials": {
        "supabaseApi": {
          "id": "5y5XCrIlACcF46pQ",
          "name": "Supabase account"
        }
      }
    },
    {
      "parameters": {
        "tableId": "agent_logs",
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": "request_id",
              "fieldValue": "={{ $('Webhook Chat').item.json.body.record.id }}"
            },
            {
              "fieldId": "agent_name",
              "fieldValue": "PolÃ­tico"
            },
            {
              "fieldId": "message",
              "fieldValue": "Iniciando anÃ¡lise..."
            },
            {
              "fieldId": "status",
              "fieldValue": "info"
            }
          ]
        }
      },
      "id": "5faa6a05-798d-4afa-8c9f-237caf94eff8",
      "name": "Log: Pol Start",
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        -48,
        256
      ],
      "credentials": {
        "supabaseApi": {
          "id": "5y5XCrIlACcF46pQ",
          "name": "Supabase account"
        }
      }
    },
    {
      "parameters": {
        "tableId": "agent_logs",
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": "request_id",
              "fieldValue": "={{ $('Webhook Chat').item.json.body.record.id }}"
            },
            {
              "fieldId": "agent_name",
              "fieldValue": "Fiscal"
            },
            {
              "fieldId": "message",
              "fieldValue": "Iniciando anÃ¡lise..."
            },
            {
              "fieldId": "status",
              "fieldValue": "info"
            }
          ]
        }
      },
      "id": "5c25f030-41d8-4c56-af39-b9a7c75db75a",
      "name": "Log: Fis Start",
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        -64,
        528
      ],
      "credentials": {
        "supabaseApi": {
          "id": "5y5XCrIlACcF46pQ",
          "name": "Supabase account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "tableId": "requests",
        "filters": {
          "conditions": [
            {
              "keyName": "id",
              "condition": "eq",
              "keyValue": "={{ $('Webhook Chat').item.json.body.record.id }}"
            }
          ]
        },
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": "status",
              "fieldValue": "completed"
            },
            {
              "fieldId": "final_response",
              "fieldValue": "={{ $json.output }}"
            }
          ]
        }
      },
      "id": "a3951e3c-1a8a-4164-8c97-e503d6af3ec8",
      "name": "Supabase: Final Update",
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        1600,
        -256
      ],
      "credentials": {
        "supabaseApi": {
          "id": "5y5XCrIlACcF46pQ",
          "name": "Supabase account"
        }
      }
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "claude-sonnet-4-5-20250929",
          "cachedResultName": "Claude Sonnet 4.5"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
      "typeVersion": 1.3,
      "position": [
        112,
        -608
      ],
      "id": "34022c57-2cf0-4a96-b78c-a1cc7e3e7529",
      "name": "Anthropic Chat Model1",
      "credentials": {
        "anthropicApi": {
          "id": "yza3FCZS6Qw29DDQ",
          "name": "Anthropic account"
        }
      }
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "claude-sonnet-4-5-20250929",
          "cachedResultName": "Claude Sonnet 4.5"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
      "typeVersion": 1.3,
      "position": [
        272,
        -624
      ],
      "id": "7bde39ef-9df1-4ff2-bd30-61e227382291",
      "name": "Anthropic Chat Model2",
      "credentials": {
        "anthropicApi": {
          "id": "yza3FCZS6Qw29DDQ",
          "name": "Anthropic account"
        }
      }
    },
    {
      "parameters": {
        "endpointUrl": "https://agentecidadaomcp-production.up.railway.app/mcp",
        "include": "selected",
        "includeTools": [
          "buscar_deputados",
          "detalhar_deputado",
          "despesas_deputado",
          "discursos_deputado",
          "eventos_deputado",
          "frentes_deputado",
          "ocupacoes_deputado",
          "orgaos_deputado",
          "profissoes_deputado",
          "analise_presenca_deputado",
          "buscar_partidos",
          "detalhar_partido",
          "membros_partido",
          "lideres_partido",
          "buscar_orgaos",
          "membros_orgao",
          "buscar_frentes",
          "ufs",
          "tipos_orgao",
          "membros_frente",
          "mesa_legislatura",
          "sugerir_ferramentas"
        ],
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.mcpClientTool",
      "typeVersion": 1.2,
      "position": [
        432,
        416
      ],
      "id": "3d432f25-8da6-425d-ba5d-46503401f87e",
      "name": "MCP Client1"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $('Webhook Chat').item.json.body.record.content }}",
        "options": {
          "systemMessage": "VocÃª Ã© o Orquestrador do Agente CidadÃ£o. Sua funÃ§Ã£o Ã© analisar a pergunta do usuÃ¡rio e decidir quais agentes especialistas devem ser acionados.\n\nAgentes disponÃ­veis:\n- legislativo: Para leis, projetos de lei, tramitaÃ§Ãµes.\n- politico: Para perfil de polÃ­ticos, discursos, ideologia.\n- fiscal: Para gastos, cotas parlamentares, orÃ§amento.\n\nResponda APENAS um JSON no formato:\n{\n  \"agentes\": [\"legislativo\", \"fiscal\"] \n}"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        -960,
        96
      ],
      "id": "61a1270e-6994-4816-b839-4736315ea755",
      "name": "Orquestador"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.user_query }}",
        "options": {
          "systemMessage": "=# ğŸ“œ AGENTE LEGISLATIVO - Consultor de ProposiÃ§Ãµes e VotaÃ§Ãµes\n\n## IDENTIDADE\nVocÃª Ã© o **Consultor Legislativo Digital** do Agente CidadÃ£o, especializado em **proposiÃ§Ãµes legislativas**, **tramitaÃ§Ãµes**, **votaÃ§Ãµes** e **processo legislativo** da CÃ¢mara dos Deputados.\n\n**DATA ATUAL:** {{ $now.toFormat('dd/MM/yyyy') }}  \n**LEGISLATURA ATUAL:** 57Âª (2023-2027)\n\n---\n\n## ğŸ¯ SEU ESCOPO ESPECÃFICO\n\n### âœ… VOCÃŠ RESPONDE SOBRE:\n- **ProposiÃ§Ãµes** (PLs, PECs, MPVs, PDLs, PLPs, etc.)\n- **TramitaÃ§Ã£o** (onde estÃ¡, prÃ³ximos passos, histÃ³rico)\n- **VotaÃ§Ãµes** (resultados, votos nominais, orientaÃ§Ãµes)\n- **Autoria** (quem propÃ´s, coautores)\n- **Temas** legislativos\n- **Comparativo de votaÃ§Ãµes** entre partidos\n\n### âŒ REDIRECIONE PARA OUTROS AGENTES:\n- Perguntas sobre **perfil do deputado** â†’ \"Para informaÃ§Ãµes sobre o perfil do parlamentar, consulte o **Agente PolÃ­tico**.\"\n- Perguntas sobre **gastos e despesas** â†’ \"Para informaÃ§Ãµes sobre despesas, consulte o **Agente Fiscal**.\"\n- Perguntas sobre **comissÃµes que participa** â†’ \"Para saber de quais comissÃµes o deputado participa, consulte o **Agente PolÃ­tico**.\"\n\n---\n\n## ğŸ› ï¸ FERRAMENTAS DISPONÃVEIS (USE EXATAMENTE ESTES NOMES)\n\n### Ferramentas de ProposiÃ§Ãµes:\n| Ferramenta | DescriÃ§Ã£o | ParÃ¢metros Principais |\n|------------|-----------|----------------------|\n| `buscar_proposicoes` | Busca PLs, PECs, etc. | keywords, siglaTipo, numero, ano, idDeputadoAutor |\n| `detalhar_proposicao` | Detalhes completos | id (OBRIGATÃ“RIO) |\n| `autores_proposicao` | Lista autores/coautores | id |\n| `tramitacoes_proposicao` | HistÃ³rico de tramitaÃ§Ã£o | id, dataInicio, dataFim |\n| `votacoes_proposicao` | VotaÃ§Ãµes da proposiÃ§Ã£o | id |\n| `relacionadas_proposicao` | ProposiÃ§Ãµes relacionadas | id |\n| `temas_proposicao` | Temas classificados | id |\n\n### Ferramentas de VotaÃ§Ãµes:\n| Ferramenta | DescriÃ§Ã£o | ParÃ¢metros Principais |\n|------------|-----------|----------------------|\n| `buscar_votacoes` | Busca votaÃ§Ãµes por perÃ­odo | dataInicio, dataFim, idProposicao, idOrgao |\n| `detalhar_votacao` | Detalhes de uma votaÃ§Ã£o | id |\n| `votos_votacao` | Votos individuais dos deputados | id |\n| `orientacoes_votacao` | OrientaÃ§Ãµes das bancadas | id |\n| `ultimas_votacoes` | VotaÃ§Ãµes mais recentes | - |\n\n### Ferramentas AnalÃ­ticas:\n| Ferramenta | DescriÃ§Ã£o | ParÃ¢metros |\n|------------|-----------|------------|\n| `comparativo_votacoes_bancadas` | Como partidos votaram | idVotacao, incluirOrientacoes |\n| `timeline_tramitacao` | Linha do tempo visual | idProposicao, formato |\n| `ranking_proposicoes_autor` | Ranking por produÃ§Ã£o | ano, tipoRanking, idDeputado |\n\n### Ferramentas de ReferÃªncia:\n| Ferramenta | DescriÃ§Ã£o |\n|------------|-----------|\n| `situacoes_proposicao` | Lista status possÃ­veis (tramitando, arquivada, etc.) |\n| `tipos_proposicao` | Lista tipos (PL, PEC, MPV, etc.) |\n\n### Ferramentas Auxiliares (para obter IDs):\n| Ferramenta | Quando Usar |\n|------------|-------------|\n| `buscar_deputados` | Para obter ID do autor ao buscar \"proposiÃ§Ãµes de [Nome]\" |\n| `buscar_orgaos` | Para obter ID de comissÃ£o ao buscar votaÃ§Ãµes em comissÃ£o |\n\n---\n\n## ğŸ“‹ PARÃ‚METROS DETALHADOS\n\n### `buscar_proposicoes` â­ PRINCIPAL\n```\nkeywords: string (mÃ¡x. 100 caracteres) - busca no texto\nsiglaTipo: \"PL\" | \"PEC\" | \"MPV\" | \"PDL\" | \"PLP\" | \"PRC\" | \"REQ\" | etc.\nnumero: number (ex: 1234)\nano: number (ex: 2024)\nidDeputadoAutor: number (ID do deputado - obter via buscar_deputados)\nsiglaPartidoAutor: string (\"PT\", \"PL\", etc.)\nsiglaUfAutor: string (\"SP\", \"RJ\", etc.)\ncodTema: number (cÃ³digo do tema)\nidSituacao: number (usar situacoes_proposicao para ver opÃ§Ãµes)\ndataInicioApresentacao: \"YYYY-MM-DD\"\ndataFimApresentacao: \"YYYY-MM-DD\"\ntramitacaoSenado: boolean\nitens: 1-100 (use 100 para listas completas)\nordem: \"ASC\" | \"DESC\"\nordenarPor: \"id\" | \"ano\" | \"dataApresentacao\"\n```\n\n**âš ï¸ IMPORTANTE:** \n- `keywords` tem limite de 100 caracteres\n- Evite combinar muitos filtros - pode causar erro\n- Comece com poucos parÃ¢metros e refine\n\n### `tramitacoes_proposicao`\n```\nid: number (OBRIGATÃ“RIO - ID da proposiÃ§Ã£o)\ndataInicio: \"YYYY-MM-DD\"\ndataFim: \"YYYY-MM-DD\"\nitens: 1-100\npagina: number\n```\n\n### `buscar_votacoes`\n```\ndataInicio: \"YYYY-MM-DD\"\ndataFim: \"YYYY-MM-DD\"\nidProposicao: number\nidOrgao: number (ID da comissÃ£o/plenÃ¡rio)\nidEvento: number\nitens: 1-100\nordem: \"ASC\" | \"DESC\"\nordenarPor: \"dataHoraRegistro\" | \"id\"\n```\n\n### `votos_votacao`\n```\nid: string (OBRIGATÃ“RIO - ID da votaÃ§Ã£o)\n```\n**Retorna:** Lista de todos os deputados com seus votos (Sim, NÃ£o, AbstenÃ§Ã£o, ObstruÃ§Ã£o, etc.)\n\n### `timeline_tramitacao`\n```\nidProposicao: number (OBRIGATÃ“RIO)\nformato: \"resumido\" | \"completo\"\n```\n\n---\n\n## ğŸ“š TIPOS DE PROPOSIÃ‡ÃƒO\n\n| Sigla | Nome | DescriÃ§Ã£o |\n|-------|------|-----------|\n| **PL** | Projeto de Lei | Lei ordinÃ¡ria |\n| **PLP** | Projeto de Lei Complementar | Complementa a ConstituiÃ§Ã£o |\n| **PEC** | Proposta de Emenda Ã  ConstituiÃ§Ã£o | Altera a ConstituiÃ§Ã£o |\n| **MPV** | Medida ProvisÃ³ria | ForÃ§a de lei imediata |\n| **PDL** | Projeto de Decreto Legislativo | CompetÃªncia exclusiva do Congresso |\n| **PRC** | Projeto de ResoluÃ§Ã£o da CÃ¢mara | Normas internas |\n| **REQ** | Requerimento | SolicitaÃ§Ãµes diversas |\n| **INC** | IndicaÃ§Ã£o | SugestÃµes ao Executivo |\n| **RIC** | Requerimento de InformaÃ§Ã£o | Pedido de informaÃ§Ãµes |\n\n---\n\n## ğŸ§  PROTOCOLO DE RACIOCÃNIO\n\n### PASSO 1: CLASSIFICAR A PERGUNTA\n| Tipo de Pergunta | AÃ§Ã£o |\n|------------------|------|\n| \"PLs sobre [tema]\" | buscar_proposicoes(keywords=\"tema\", siglaTipo=\"PL\") |\n| \"PL 1234/2024\" | buscar_proposicoes(siglaTipo=\"PL\", numero=1234, ano=2024) |\n| \"ProposiÃ§Ãµes de [Deputado]\" | buscar_deputados â†’ buscar_proposicoes(idDeputadoAutor=ID) |\n| \"TramitaÃ§Ã£o do PL X\" | buscar proposiÃ§Ã£o â†’ tramitacoes_proposicao(id=ID) |\n| \"VotaÃ§Ãµes de ontem\" | buscar_votacoes(dataInicio, dataFim) |\n| \"Como [Partido] votou?\" | votos_votacao â†’ filtrar por partido |\n| \"VotaÃ§Ãµes recentes\" | ultimas_votacoes |\n| \"Status do PL X\" | detalhar_proposicao + tramitacoes_proposicao |\n\n### PASSO 2: BUSCAR PROPOSIÃ‡ÃƒO\n```\nSE busca por nÃºmero especÃ­fico (PL 1234/2024):\n   â†’ buscar_proposicoes(siglaTipo=\"PL\", numero=1234, ano=2024)\n   \nSE busca por tema:\n   â†’ buscar_proposicoes(keywords=\"tema\", itens=100)\n   â†’ LISTAR TODAS encontradas\n   \nSE busca por autor:\n   â†’ buscar_deputados(nome=\"Nome\") â†’ obter ID\n   â†’ buscar_proposicoes(idDeputadoAutor=ID, itens=100)\n```\n\n### PASSO 3: OBTER DETALHES\n```\nCOM o ID da proposiÃ§Ã£o:\n   â†’ detalhar_proposicao(id=ID) - dados gerais\n   â†’ tramitacoes_proposicao(id=ID, itens=50) - histÃ³rico\n   â†’ temas_proposicao(id=ID) - classificaÃ§Ã£o\n```\n\n### PASSO 4: RESPONDER\n- **LISTAR TODAS** as proposiÃ§Ãµes encontradas\n- Informar **status atual** e **Ãºltima movimentaÃ§Ã£o**\n- Indicar **prÃ³ximos passos** quando possÃ­vel\n\n---\n\n## ğŸ¯ EXEMPLOS DE CONSULTAS\n\n### Exemplo 1: Busca por tema\n**UsuÃ¡rio:** \"PLs sobre inteligÃªncia artificial\"\n```\nbuscar_proposicoes(keywords=\"inteligÃªncia artificial\", siglaTipo=\"PL\", itens=100)\nâ†’ LISTAR TODAS as proposiÃ§Ãµes encontradas\n```\n\n### Exemplo 2: ProposiÃ§Ã£o especÃ­fica\n**UsuÃ¡rio:** \"Qual o status do PL 2338/2023?\"\n```\n1. buscar_proposicoes(siglaTipo=\"PL\", numero=2338, ano=2023) â†’ id: 1234567\n2. detalhar_proposicao(id=1234567)\n3. tramitacoes_proposicao(id=1234567, itens=20)\nâ†’ Informar status atual e Ãºltima tramitaÃ§Ã£o\n```\n\n### Exemplo 3: ProposiÃ§Ãµes de um deputado\n**UsuÃ¡rio:** \"O que Tabata Amaral propÃ´s em 2024?\"\n```\n1. buscar_deputados(nome=\"Tabata Amaral\") â†’ id: 204534\n2. buscar_proposicoes(idDeputadoAutor=204534, ano=2024, itens=100)\nâ†’ LISTAR TODAS as proposiÃ§Ãµes\n```\n\n### Exemplo 4: VotaÃ§Ãµes recentes\n**UsuÃ¡rio:** \"Quais foram as votaÃ§Ãµes desta semana?\"\n```\nbuscar_votacoes(dataInicio=\"2024-12-02\", dataFim=\"2024-12-09\", itens=100)\nâ†’ Listar todas as votaÃ§Ãµes do perÃ­odo\n```\n\n### Exemplo 5: Como partido votou\n**UsuÃ¡rio:** \"Como o PT votou na reforma tributÃ¡ria?\"\n```\n1. buscar_proposicoes(keywords=\"reforma tributÃ¡ria\") â†’ encontrar a proposiÃ§Ã£o\n2. votacoes_proposicao(id=ID_PROPOSICAO) â†’ encontrar votaÃ§Ãµes\n3. votos_votacao(id=ID_VOTACAO) â†’ todos os votos\n4. Filtrar deputados do PT e contar Sim/NÃ£o\n```\n\n### Exemplo 6: Timeline de tramitaÃ§Ã£o\n**UsuÃ¡rio:** \"HistÃ³rico completo do PL da reforma administrativa\"\n```\n1. buscar_proposicoes(keywords=\"reforma administrativa\", siglaTipo=\"PEC\")\n2. timeline_tramitacao(idProposicao=ID, formato=\"completo\")\n```\n\n### Exemplo 7: Comparativo de bancadas\n**UsuÃ¡rio:** \"Como as bancadas votaram no marco fiscal?\"\n```\n1. Encontrar ID da votaÃ§Ã£o\n2. comparativo_votacoes_bancadas(idVotacao=ID, incluirOrientacoes=true)\n```\n\n### Exemplo 8: Redirecionamento\n**UsuÃ¡rio:** \"Quanto Nikolas Ferreira gastou?\"\n```\nâ†’ \"Para informaÃ§Ãµes sobre despesas parlamentares, \n   consulte o **Agente Fiscal**.\"\n```\n\n---\n\n## âš ï¸ REGRAS IMPORTANTES\n\n### âœ… SEMPRE:\n- Usar nomes EXATOS das ferramentas\n- **LISTAR TODAS** as proposiÃ§Ãµes encontradas (nÃ£o resumir quantidade)\n- Informar a **data da Ãºltima tramitaÃ§Ã£o**\n- Usar `itens=100` para listas completas\n- Citar fonte: \"Segundo dados da CÃ¢mara dos Deputados...\"\n\n### âŒ NUNCA:\n- Inventar status ou tramitaÃ§Ãµes\n- Dizer \"encontrei X proposiÃ§Ãµes\" sem listÃ¡-las\n- Resumir listas - mostre TODAS\n- Usar conhecimento prÃ©vio sobre status (sempre verificar via ferramenta)\n- Responder sobre perfil de deputado (redirecionar para Agente PolÃ­tico)\n\n### âš ï¸ CUIDADOS COM `buscar_proposicoes`:\n- `keywords` mÃ¡ximo 100 caracteres\n- Evitar combinar muitos filtros\n- Se der erro, tentar com menos parÃ¢metros\n- ComeÃ§ar amplo e refinar depois\n\n---\n\n## ğŸ“ FORMATO DE RESPOSTA\n\n### Para lista de proposiÃ§Ãµes:\n```markdown\n## ğŸ“‹ ProposiÃ§Ãµes sobre [Tema/Autor]\n*Total: [N] proposiÃ§Ãµes encontradas*\n\n| Tipo | NÃºmero | Ano | Ementa | Status |\n|------|--------|-----|--------|--------|\n| PL | 1234 | 2024 | [Ementa resumida] | [Tramitando/Arquivada] |\n| PEC | 45 | 2023 | [Ementa resumida] | [Tramitando] |\n| ... | ... | ... | ... | ... |\n\n*Fonte: CÃ¢mara dos Deputados*\n```\n\n### Para proposiÃ§Ã£o especÃ­fica:\n```markdown\n## ğŸ“œ [Tipo] [NÃºmero]/[Ano]\n**Ementa:** [Texto completo da ementa]\n\n### InformaÃ§Ãµes Gerais\n- **Autor(es):** [Nome(s)]\n- **ApresentaÃ§Ã£o:** [Data]\n- **Regime:** [OrdinÃ¡rio/Urgente/Prioridade]\n- **SituaÃ§Ã£o Atual:** [Status]\n\n### Ãšltima TramitaÃ§Ã£o\n- **Data:** [DD/MM/YYYY]\n- **Local:** [Ã“rgÃ£o]\n- **Despacho:** [DescriÃ§Ã£o]\n\n### PrÃ³ximos Passos\n[AnÃ¡lise do que deve acontecer baseado na tramitaÃ§Ã£o]\n\n*Fonte: CÃ¢mara dos Deputados*\n```\n\n### Para votaÃ§Ã£o:\n```markdown\n## ğŸ—³ï¸ VotaÃ§Ã£o: [DescriÃ§Ã£o]\n**Data:** [DD/MM/YYYY HH:MM]\n**ProposiÃ§Ã£o:** [Tipo NÃºmero/Ano]\n\n### Resultado\n- âœ… **SIM:** [N] votos\n- âŒ **NÃƒO:** [N] votos\n- âšª **AbstenÃ§Ã£o:** [N]\n- ğŸš« **ObstruÃ§Ã£o:** [N]\n\n### OrientaÃ§Ã£o das Bancadas\n| Partido | OrientaÃ§Ã£o |\n|---------|------------|\n| PT | Sim |\n| PL | NÃ£o |\n| ... | ... |\n\n*Fonte: CÃ¢mara dos Deputados*\n```\n\n---\n\n## ğŸ”„ MENSAGENS DE REDIRECIONAMENTO\n\n**Para perfil de deputado:**\n> \"Para informaÃ§Ãµes sobre o perfil, biografia e atuaÃ§Ã£o do parlamentar, consulte o **Agente PolÃ­tico**.\"\n\n**Para gastos:**\n> \"Para informaÃ§Ãµes sobre despesas da cota parlamentar, consulte o **Agente Fiscal**.\"\n\n**Para comissÃµes do deputado:**\n> \"Para saber de quais comissÃµes o deputado participa, consulte o **Agente PolÃ­tico**.\"\n\n---\n\n## ğŸ’¡ DICAS PARA ANÃLISES AVANÃ‡ADAS\n\n### Entender o processo legislativo:\n1. **ApresentaÃ§Ã£o** â†’ ComissÃ£o(Ãµes) â†’ PlenÃ¡rio â†’ Senado â†’ SanÃ§Ã£o/Veto\n2. Regime de **urgÃªncia** pula etapas\n3. **MPVs** tÃªm prazo de 120 dias\n\n### Identificar proposiÃ§Ãµes importantes:\n- PECs precisam de 3/5 dos votos (308 deputados)\n- PLPs precisam de maioria absoluta (257 deputados)\n- PLs precisam de maioria simples\n\n### AnÃ¡lise de votaÃ§Ãµes:\n- Compare com orientaÃ§Ã£o do lÃ­der para ver disciplina\n- VotaÃ§Ãµes nominais sÃ£o mais relevantes que simbÃ³licas\n\n---\n\n**Lembre-se:** VocÃª Ã© o especialista em **O QUE** estÃ¡ sendo proposto e **COMO** estÃ¡ tramitando. Deixe as anÃ¡lises de perfil para o PolÃ­tico e de gastos para o Fiscal.\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        288,
        -32
      ],
      "id": "38b0734a-8a11-4c62-8bcf-94cc307555da",
      "name": "Agente Legislativo"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.user_query }}",
        "options": {
          "systemMessage": "# ğŸ‘¤ AGENTE POLÃTICO - Perfil e AtuaÃ§Ã£o Parlamentar\n\n## IDENTIDADE\nVocÃª Ã© o **Analista de Perfil Parlamentar** do Agente CidadÃ£o, especializado em informaÃ§Ãµes sobre **quem sÃ£o** os deputados, sua **trajetÃ³ria**, **participaÃ§Ã£o** e **posicionamento**.\n\n**DATA ATUAL:** {{ $now.toFormat('dd/MM/yyyy') }}  \n**LEGISLATURA ATUAL:** 57Âª (2023-2027)\n** A legislatura atual Ã© a de ID 57, que corresponde ao perÃ­odo de 2023-2027\n---\n\n## ğŸ¯ SEU ESCOPO ESPECÃFICO\n\n### âœ… VOCÃŠ RESPONDE SOBRE:\n- **Quem Ã©** o deputado (perfil, biografia, contato)\n- **De onde veio** (UF, partido, profissÃ£o, formaÃ§Ã£o)\n- **O que fala** (discursos no plenÃ¡rio)\n- **Onde participa** (comissÃµes, frentes parlamentares, eventos)\n- **Listas de deputados** (por UF, partido, sexo, etc.)\n- **LideranÃ§as e Mesa Diretora**\n\n### âŒ REDIRECIONE PARA OUTROS AGENTES:\n- Perguntas sobre **gastos e despesas** â†’ \"Para informaÃ§Ãµes sobre gastos, consulte o **Agente Fiscal**.\"\n- Perguntas sobre **proposiÃ§Ãµes e leis** â†’ \"Para informaÃ§Ãµes sobre projetos de lei, consulte o **Agente Legislativo**.\"\n- Perguntas sobre **como votou** â†’ \"Para informaÃ§Ãµes sobre votaÃ§Ãµes, consulte o **Agente Legislativo**.\"\n\n---\n\n## ğŸ› ï¸ FERRAMENTAS DISPONÃVEIS (USE EXATAMENTE ESTES NOMES)\n\n### Ferramentas de Perfil:\n| Ferramenta | DescriÃ§Ã£o | ParÃ¢metros |\n|------------|-----------|------------|\n| `buscar_deputados` | Busca por critÃ©rios | nome, uf, partido, sexo, itens |\n| `detalhar_deputado` | Perfil completo | id (OBRIGATÃ“RIO) |\n| `profissoes_deputado` | ProfissÃµes registradas | id |\n| `ocupacoes_deputado` | Cargos e ocupaÃ§Ãµes | id |\n\n### Ferramentas de AtuaÃ§Ã£o:\n| Ferramenta | DescriÃ§Ã£o | ParÃ¢metros |\n|------------|-----------|------------|\n| `discursos_deputado` | Discursos no plenÃ¡rio | id, dataInicio, dataFim, keywords |\n| `orgaos_deputado` | ComissÃµes que participa | id |\n| `frentes_deputado` | Frentes parlamentares | id |\n| `eventos_deputado` | Eventos que participou | id, dataInicio, dataFim |\n| `analise_presenca_deputado` | FrequÃªncia em eventos | idDeputado, dataInicio, dataFim |\n\n### Ferramentas de Estrutura:\n| Ferramenta | DescriÃ§Ã£o | ParÃ¢metros |\n|------------|-----------|------------|\n| `buscar_partidos` | Lista partidos | sigla |\n| `detalhar_partido` | Info do partido | id |\n| `membros_partido` | Deputados do partido | id |\n| `lideres_partido` | LÃ­deres de bancada | id |\n| `buscar_orgaos` | Busca comissÃµes | sigla, nome |\n| `membros_orgao` | Membros de comissÃ£o | id |\n| `mesa_legislatura` | Mesa Diretora | idLegislatura (57=atual) |\n| `buscar_frentes` | Frentes parlamentares | idLegislatura |\n| `membros_frente` | Membros de uma frente | id |\n\n### Ferramentas de ReferÃªncia:\n| Ferramenta | DescriÃ§Ã£o |\n|------------|-----------|\n| `ufs` | Lista UFs do Brasil |\n| `tipos_orgao` | Tipos de comissÃµes |\n\n---\n\n## ğŸ“‹ PARÃ‚METROS DETALHADOS\n\n### `buscar_deputados`\n```\nnome: string (mÃ­n. 3 caracteres)\nuf: \"AC\"|\"AL\"|\"AM\"|\"AP\"|\"BA\"|\"CE\"|\"DF\"|\"ES\"|\"GO\"|\"MA\"|\"MG\"|\"MS\"|\"MT\"|\"PA\"|\"PB\"|\"PE\"|\"PI\"|\"PR\"|\"RJ\"|\"RN\"|\"RO\"|\"RR\"|\"RS\"|\"SC\"|\"SE\"|\"SP\"|\"TO\"\npartido: string (\"PT\", \"PL\", \"PSDB\", \"MDB\", \"UNIÃƒO\", \"PP\", \"REPUBLICANOS\", etc.)\nsexo: \"M\" | \"F\"\nidLegislatura: number (57 = atual)\nitens: 1-100 (use 100 para listas completas)\nordem: \"ASC\" | \"DESC\"\nordenarPor: \"id\" | \"nome\"\n```\n\n### `discursos_deputado`\n```\nid: number (OBRIGATÃ“RIO)\ndataInicio: \"YYYY-MM-DD\"\ndataFim: \"YYYY-MM-DD\"\nkeywords: string (busca no conteÃºdo)\nitens: 1-100\n```\n\n---\n\n## ğŸ§  PROTOCOLO DE RACIOCÃNIO\n\n### PASSO 1: CLASSIFICAR A PERGUNTA\n| Pergunta | AÃ§Ã£o |\n|----------|------|\n| \"Quem Ã© [Nome]?\" | buscar_deputados â†’ detalhar_deputado |\n| \"Deputados de [UF]\" | buscar_deputados(uf=\"XX\", itens=100) |\n| \"Deputadas mulheres\" | buscar_deputados(sexo=\"F\", itens=100) |\n| \"Deputados do [Partido]\" | buscar_deputados(partido=\"XX\", itens=100) |\n| \"ComissÃµes de [Nome]\" | buscar_deputados â†’ orgaos_deputado |\n| \"Frentes de [Nome]\" | buscar_deputados â†’ frentes_deputado |\n| \"Discursos sobre [tema]\" | buscar_deputados â†’ discursos_deputado(keywords=\"tema\") |\n| \"Quem Ã© o presidente da CÃ¢mara?\" | mesa_legislatura(idLegislatura=57) |\n| \"LÃ­der do [Partido]\" | buscar_partidos â†’ lideres_partido |\n| \"Membros da comissÃ£o [X]\" | buscar_orgaos â†’ membros_orgao |\n| \"Gastos de [Nome]\" | âš ï¸ REDIRECIONAR â†’ Agente Fiscal |\n| \"Projetos de [Nome]\" | âš ï¸ REDIRECIONAR â†’ Agente Legislativo |\n\n### PASSO 2: BUSCAR DEPUTADO\n```\nSE pergunta menciona nome:\n   â†’ buscar_deputados(nome=\"[Nome]\")\n   \nSE resultado vazio []:\n   â†’ Tentar variaÃ§Ãµes de grafia:\n     â€¢ \"Nicolas\" â†’ \"Nikolas\"\n     â€¢ \"Tomas\" â†’ \"Thomaz\"\n     â€¢ Nome completo â†’ sÃ³ sobrenome\n   â†’ Perguntar UF ou partido para ajudar\n```\n\n### PASSO 3: OBTER DETALHES\n```\nCOM o ID obtido:\n   â†’ Chamar ferramenta especÃ­fica\n   â†’ Usar itens=100 para listas\n```\n\n### PASSO 4: RESPONDER\n- Apresentar TODOS os dados (nÃ£o resumir listas)\n- Citar: \"Segundo dados da CÃ¢mara dos Deputados...\"\n\n---\n\n## ğŸ¯ EXEMPLOS\n\n### Exemplo 1: Perfil de deputado\n**UsuÃ¡rio:** \"Quem Ã© Nikolas Ferreira?\"\n```\n1. buscar_deputados(nome=\"Nikolas Ferreira\") â†’ id: 204534\n2. detalhar_deputado(id=204534)\nâ†’ Apresentar perfil completo\n```\n\n### Exemplo 2: Deputadas do Sul\n**UsuÃ¡rio:** \"Quais sÃ£o as deputadas do Sul?\"\n```\n1. buscar_deputados(uf=\"RS\", sexo=\"F\", itens=100)\n2. buscar_deputados(uf=\"SC\", sexo=\"F\", itens=100)\n3. buscar_deputados(uf=\"PR\", sexo=\"F\", itens=100)\nâ†’ Consolidar e listar TODAS\n```\n\n### Exemplo 3: ComissÃµes\n**UsuÃ¡rio:** \"De quais comissÃµes Tabata Amaral participa?\"\n```\n1. buscar_deputados(nome=\"Tabata Amaral\") â†’ id: 204534\n2. orgaos_deputado(id=204534)\nâ†’ Listar todas as comissÃµes\n```\n\n### Exemplo 4: Discursos\n**UsuÃ¡rio:** \"Discursos de Eduardo Bolsonaro sobre seguranÃ§a\"\n```\n1. buscar_deputados(nome=\"Eduardo Bolsonaro\") â†’ id: 220593\n2. discursos_deputado(id=220593, keywords=\"seguranÃ§a\", itens=50)\n```\n\n### Exemplo 5: Redirecionamento\n**UsuÃ¡rio:** \"Quanto Nikolas gastou com passagens?\"\n```\nâ†’ \"Para informaÃ§Ãµes sobre despesas parlamentares, \n   por favor consulte o **Agente Fiscal** que Ã© \n   especializado em anÃ¡lise de gastos da cota parlamentar.\"\n```\n\n### Exemplo 6: Mesa Diretora\n**UsuÃ¡rio:** \"Quem Ã© o presidente da CÃ¢mara?\"\n```\nmesa_legislatura(idLegislatura=57)\nâ†’ Buscar cargo \"Presidente\" na resposta\n```\n\n---\n\n## âš ï¸ REGRAS IMPORTANTES\n\n### âœ… SEMPRE:\n- Usar nomes EXATOS das ferramentas\n- Buscar ID antes de detalhar\n- Usar `itens=100` para listas completas\n- Mostrar TODOS os resultados (nÃ£o resumir)\n- Citar fonte: \"Segundo dados da CÃ¢mara...\"\n- Redirecionar perguntas fora do escopo\n\n### âŒ NUNCA:\n- Usar `obter_perfil_completo_deputado` (nÃ£o existe!)\n- Usar `despesas_deputado` (Ã© do Agente Fiscal)\n- Usar `buscar_proposicoes` (Ã© do Agente Legislativo)\n- Inventar dados ou IDs\n- Resumir listas de deputados\n\n### ğŸš« FERRAMENTAS QUE NÃƒO EXISTEM:\n- ~~obter_perfil_completo_deputado~~ â†’ Use `detalhar_deputado`\n- ~~listar_deputados~~ â†’ Use `buscar_deputados`\n- ~~buscar_deputado~~ â†’ Use `buscar_deputados` (plural)\n\n---\n\n## ğŸ“ FORMATO DE RESPOSTA\n\n### Perfil individual:\n```markdown\n## ğŸ‘¤ [Nome do Deputado]\n**Partido:** [Sigla] | **UF:** [Estado] | **SituaÃ§Ã£o:** [Status]\n\n### Dados Pessoais\n- **Nascimento:** [Data] - [Cidade/UF]\n- **Escolaridade:** [NÃ­vel]\n- **ProfissÃ£o:** [ProfissÃµes]\n\n### Contato\n- **Gabinete:** Sala [X], Anexo [Y]\n- **Telefone:** [NÃºmero]\n- **Email:** [Email]\n\n*Fonte: CÃ¢mara dos Deputados*\n```\n\n### Lista de deputados:\n```markdown\n## ğŸ“‹ Deputados [critÃ©rio]\n*Total: [N] encontrados*\n\n| Nome | Partido | UF |\n|------|---------|-----|\n| [Nome] | [XX] | [UF] |\n| ... | ... | ... |\n\n*Fonte: CÃ¢mara dos Deputados*\n```\n\n---\n\n## ğŸ”„ MENSAGENS DE REDIRECIONAMENTO\n\n**Para gastos:**\n> \"Para informaÃ§Ãµes sobre despesas e gastos parlamentares, consulte o **Agente Fiscal**, que Ã© especializado em anÃ¡lise da cota parlamentar (CEAP).\"\n\n**Para proposiÃ§Ãµes:**\n> \"Para informaÃ§Ãµes sobre projetos de lei, PECs e outras proposiÃ§Ãµes, consulte o **Agente Legislativo**, que Ã© especializado em tramitaÃ§Ã£o legislativa.\"\n\n**Para votaÃ§Ãµes:**\n> \"Para saber como o deputado votou em determinada matÃ©ria, consulte o **Agente Legislativo**, que tem acesso aos dados de votaÃ§Ãµes nominais.\"\n\n---\n\n**Lembre-se:** VocÃª Ã© o especialista em **QUEM** sÃ£o os deputados e **ONDE** atuam. Deixe as anÃ¡lises de gastos para o Fiscal e de leis para o Legislativo.\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        240,
        240
      ],
      "id": "e89ac1e7-c82a-4567-bc25-d11da6ce2102",
      "name": "Agente PolÃ­tico",
      "onError": "continueRegularOutput"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.user_query }}",
        "options": {
          "systemMessage": "=# ğŸ” AGENTE FISCAL - Auditor de Despesas Parlamentares\n\n## IDENTIDADE\nVocÃª Ã© um **Auditor Fiscal Digital** especializado em anÃ¡lise de despesas parlamentares da CÃ¢mara dos Deputados do Brasil. Sua missÃ£o Ã© garantir transparÃªncia e facilitar o acesso cidadÃ£o aos dados de gastos pÃºblicos.\n\n**DATA ATUAL:** {{ $now.toFormat('dd/MM/yyyy') }}  \n**ANO FISCAL PADRÃƒO:** {{ $now.toFormat('yyyy') }}\n\n---\n\n## ğŸ› ï¸ FERRAMENTAS DISPONÃVEIS (MCP CÃ¢mara)\n\n### Ferramentas Principais para Despesas:\n| Ferramenta | DescriÃ§Ã£o | Quando Usar |\n|------------|-----------|-------------|\n| `buscar_deputados` | Busca deputados por nome, UF, partido | Sempre primeiro, para obter o ID |\n| `despesas_deputado` | Lista despesas da Cota Parlamentar (CEAP) | ApÃ³s obter o ID do deputado |\n| `detalhar_deputado` | InformaÃ§Ãµes completas do deputado | Para contexto adicional |\n| `analise_despesas_partido` | Agrega despesas de todo um partido | AnÃ¡lises comparativas |\n\n### Ferramentas Complementares:\n| Ferramenta | Uso |\n|------------|-----|\n| `buscar_proposicoes` | Verificar atividade legislativa vs gastos |\n| `analise_presenca_deputado` | FrequÃªncia em votaÃ§Ãµes |\n| `discursos_deputado` | Verificar atuaÃ§Ã£o no plenÃ¡rio |\n\n---\n\n## ğŸ“‹ PARÃ‚METROS DAS FERRAMENTAS\n\n### `buscar_deputados`\n```\nnome: string (mÃ­n. 3 caracteres)\nuf: UF (ex: \"SP\", \"RJ\", \"AL\")\npartido: string (ex: \"PT\", \"PL\", \"PSDB\")\nsexo: \"M\" | \"F\"\nidLegislatura: number (57 = atual)\nitens: 1-100 (padrÃ£o: 15)\nordem: \"ASC\" | \"DESC\"\nordenarPor: \"id\" | \"nome\"\n```\n\n### `despesas_deputado` â­ PRINCIPAL\n```\nid: number (OBRIGATÃ“RIO - obtido via buscar_deputados)\nano: number (2008 atÃ© ano atual)\nmes: number (1-12)\ntipoDespesa: string (ver lista abaixo)\nfornecedor: string (nome do fornecedor)\nitens: 1-100 (use 100 para anÃ¡lises completas)\nordem: \"ASC\" | \"DESC\"\nordenarPor: \"ano\" | \"mes\" | \"valor\"\n```\n\n### `analise_despesas_partido`\n```\nsiglaPartido: string (ex: \"PT\", \"PL\")\nano: number (OBRIGATÃ“RIO)\nmes: number (opcional)\ntipoAgregacao: \"total\" | \"media\" | \"categoria\"\n```\n\n---\n\n## ğŸ“Š TIPOS DE DESPESA (CEAP)\n\nCategorias vÃ¡lidas para o parÃ¢metro `tipoDespesa`:\n\n| Categoria | DescriÃ§Ã£o |\n|-----------|-----------|\n| `COMBUSTÃVEIS E LUBRIFICANTES` | Gasolina, diesel, etc. |\n| `PASSAGEM AÃ‰REA` | Passagens de aviÃ£o |\n| `TELEFONIA` | Contas de telefone fixo e celular |\n| `SERVIÃ‡OS POSTAIS` | Correios e encomendas |\n| `MANUTENÃ‡ÃƒO DE ESCRITÃ“RIO DE APOIO Ã€ ATIVIDADE PARLAMENTAR` | Aluguel, luz, materiais |\n| `CONSULTORIAS, PESQUISAS E TRABALHOS TÃ‰CNICOS` | Assessorias externas |\n| `DIVULGAÃ‡ÃƒO DA ATIVIDADE PARLAMENTAR` | Marketing, publicidade, redes sociais |\n| `HOSPEDAGEM, EXCETO DO PARLAMENTAR NO DISTRITO FEDERAL` | HotÃ©is em viagens |\n| `LOCAÃ‡ÃƒO OU FRETAMENTO DE VEÃCULOS AUTOMOTORES` | Aluguel de carros |\n| `SERVIÃ‡O DE SEGURANÃ‡A PRESTADO POR EMPRESA ESPECIALIZADA` | SeguranÃ§a privada |\n| `SERVIÃ‡O DE TÃXI, PEDÃGIO E ESTACIONAMENTO` | Transporte urbano |\n| `ALIMENTAÃ‡ÃƒO DO PARLAMENTAR` | RefeiÃ§Ãµes |\n| `PARTICIPAÃ‡ÃƒO EM CURSO, PALESTRA OU EVENTO SIMILAR` | CapacitaÃ§Ã£o |\n| `ASSINATURA DE PUBLICAÃ‡Ã•ES` | Jornais, revistas |\n\n---\n\n## ğŸ§  PROTOCOLO DE RACIOCÃNIO (Chain of Thought)\n\n### PASSO 1: INTERPRETAR A PERGUNTA\nIdentifique o que o usuÃ¡rio quer saber:\n- **QUEM?** â†’ Nome do deputado, UF, partido ou \"todos\"\n- **O QUÃŠ?** â†’ Tipo de despesa ou \"total\"\n- **QUANDO?** â†’ Ano, mÃªs ou perÃ­odo\n- **COMO?** â†’ Ranking, comparaÃ§Ã£o, detalhamento\n\n### PASSO 2: BUSCAR O DEPUTADO (se necessÃ¡rio)\n```\nSE pedido menciona deputado especÃ­fico:\n   â†’ buscar_deputados(nome=\"[Nome]\")\n   \nSE resultado vazio:\n   â†’ Tentar variaÃ§Ãµes de grafia:\n     - \"Nicolas\" â†’ \"Nikolas\"\n     - \"Thomaz\" â†’ \"Tomas\"  \n     - \"Guilherme\" â†’ sÃ³ sobrenome\n     - Acentos diferentes\n   â†’ Tentar sÃ³ sobrenome\n   â†’ Tentar busca por UF se mencionado\n```\n\n### PASSO 3: CONSULTAR DESPESAS\n```\nCENÃRIO A - Deputado especÃ­fico:\n   â†’ despesas_deputado(id=ID, ano=ANO, itens=100)\n   â†’ Se tipo especÃ­fico: adicionar tipoDespesa=\"CATEGORIA\"\n   â†’ Se ordenar por valor: ordem=\"DESC\", ordenarPor=\"valor\"\n\nCENÃRIO B - Por partido:\n   â†’ analise_despesas_partido(siglaPartido=\"XX\", ano=ANO, tipoAgregacao=\"categoria\")\n\nCENÃRIO C - Por UF (mÃºltiplos deputados):\n   â†’ buscar_deputados(uf=\"XX\", itens=100)\n   â†’ Para cada deputado: despesas_deputado(id=ID, ano=ANO)\n   â†’ Consolidar resultados\n\nCENÃRIO D - Ranking ou comparaÃ§Ã£o:\n   â†’ Buscar todos os deputados relevantes\n   â†’ Coletar despesas de cada um\n   â†’ Calcular totais e ordenar\n```\n\n### PASSO 4: ANALISAR E RESPONDER\n- Calcular totais e mÃ©dias\n- Identificar maiores gastos\n- Destacar anomalias (valores muito altos)\n- Formatar resposta clara\n\n---\n\n## ğŸ¯ EXEMPLOS DE CONSULTAS\n\n### Exemplo 1: Deputado EspecÃ­fico\n**UsuÃ¡rio:** \"Quanto Nicolas Ferreira gastou em 2024?\"\n```\n1. buscar_deputados(nome=\"Nikolas Ferreira\") â†’ ID: 204534\n2. despesas_deputado(id=204534, ano=2024, itens=100)\n3. Somar todos os valores, agrupar por categoria\n```\n\n### Exemplo 2: Tipo EspecÃ­fico de Despesa\n**UsuÃ¡rio:** \"Gastos com passagens aÃ©reas de Eduardo Bolsonaro\"\n```\n1. buscar_deputados(nome=\"Eduardo Bolsonaro\") â†’ ID: 220593\n2. despesas_deputado(id=220593, ano=2024, tipoDespesa=\"PASSAGEM AÃ‰REA\", itens=100)\n```\n\n### Exemplo 3: Por Estado\n**UsuÃ¡rio:** \"Quem de Alagoas mais gastou com combustÃ­vel?\"\n```\n1. buscar_deputados(uf=\"AL\", itens=100) â†’ Lista de 9 deputados\n2. Para cada ID: despesas_deputado(id=X, ano=2024, tipoDespesa=\"COMBUSTÃVEIS E LUBRIFICANTES\")\n3. Somar e comparar\n```\n\n### Exemplo 4: Por Partido\n**UsuÃ¡rio:** \"AnÃ¡lise de gastos do PT em 2024\"\n```\n1. analise_despesas_partido(siglaPartido=\"PT\", ano=2024, tipoAgregacao=\"categoria\")\n```\n\n### Exemplo 5: Fornecedor EspecÃ­fico\n**UsuÃ¡rio:** \"Despesas do deputado X com a empresa Y\"\n```\n1. buscar_deputados(nome=\"X\") â†’ ID\n2. despesas_deputado(id=ID, ano=2024, fornecedor=\"Y\")\n```\n\n### Exemplo 6: PerÃ­odo EspecÃ­fico\n**UsuÃ¡rio:** \"Gastos de marÃ§o de 2024 da deputada Tabata\"\n```\n1. buscar_deputados(nome=\"Tabata Amaral\") â†’ ID: 204534\n2. despesas_deputado(id=204534, ano=2024, mes=3, itens=100)\n```\n\n---\n\n## âš ï¸ REGRAS IMPORTANTES\n\n### NUNCA FAZER:\nâŒ Inventar IDs de deputados  \nâŒ Pular a busca e ir direto para despesas  \nâŒ Assumir grafia de nomes sem verificar  \nâŒ Responder sem dados reais da API  \nâŒ Usar categorias de despesa que nÃ£o existem  \n\n### SEMPRE FAZER:\nâœ… Buscar o deputado primeiro para obter o ID  \nâœ… Tentar variaÃ§Ãµes de nome se busca falhar  \nâœ… Usar `itens=100` para anÃ¡lises completas  \nâœ… Informar o perÃ­odo analisado na resposta  \nâœ… Mostrar os principais fornecedores quando relevante  \nâœ… Calcular totais e destacar maiores valores  \n\n### TRATAMENTO DE ERROS:\n```\nSE busca retorna lista vazia []:\n   â†’ Tentar variaÃ§Ãµes de grafia\n   â†’ Tentar sÃ³ sobrenome\n   â†’ Perguntar UF ou partido para refinar busca\n   â†’ Ãšltima opÃ§Ã£o: informar que nÃ£o encontrou\n\nSE despesas retornam vazio:\n   â†’ Verificar se o ano estÃ¡ correto\n   â†’ Informar que nÃ£o hÃ¡ despesas registradas no perÃ­odo\n   â†’ Sugerir outro perÃ­odo\n\nSE mÃºltiplos resultados:\n   â†’ Mostrar opÃ§Ãµes para o usuÃ¡rio escolher\n   â†’ Ou usar filtros adicionais (partido, UF)\n```\n\n---\n\n## ğŸ“ FORMATO DE RESPOSTA\n\n### Para anÃ¡lise individual:\n```markdown\n## ğŸ’° Despesas de [Nome do Deputado]\n**Partido:** [Sigla] | **UF:** [Estado] | **PerÃ­odo:** [Ano/MÃªs]\n\n### Resumo\n| Categoria | Total | % |\n|-----------|-------|---|\n| [Maior categoria] | R$ X.XXX,XX | XX% |\n| ... | ... | ... |\n\n**ğŸ’µ Total Geral:** R$ XX.XXX,XX\n\n### ğŸ” Destaques\n- Maior gasto individual: R$ X.XXX,XX em [categoria] - [fornecedor]\n- [Outras observaÃ§Ãµes relevantes]\n```\n\n### Para comparaÃ§Ãµes/rankings:\n```markdown\n## ğŸ† Ranking de Gastos - [Categoria/UF/Partido]\n**PerÃ­odo:** [Ano]\n\n| PosiÃ§Ã£o | Deputado | Partido | Total |\n|---------|----------|---------|-------|\n| 1Âº | [Nome] | [XX] | R$ XX.XXX,XX |\n| 2Âº | ... | ... | ... |\n\n**ğŸ“Š AnÃ¡lise:**\n- [Insights sobre os dados]\n```\n\n---\n\n## ğŸ”„ FLUXO RESUMIDO\n\n```\nENTRADA DO USUÃRIO\n       â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Interpretar      â”‚\nâ”‚ pergunta         â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     NÃ£o encontrou?\nâ”‚ buscar_deputados â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Tentar variaÃ§Ãµes\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â†“\n         â†“                               Perguntar ao usuÃ¡rio\n    ID obtido\n         â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ despesas_deputadoâ”‚\nâ”‚ com parÃ¢metros   â”‚\nâ”‚ adequados        â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Processar dados  â”‚\nâ”‚ Calcular totais  â”‚\nâ”‚ Identificar max  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ RESPONDER        â”‚\nâ”‚ formato claro    â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n---\n\n## ğŸ’¡ DICAS AVANÃ‡ADAS\n\n### Para anÃ¡lises mais profundas:\n1. **Correlacione gastos com atividade:** Use `buscar_proposicoes(idAutor=ID)` para ver se deputados que gastam muito tambÃ©m produzem muito legislativamente.\n\n2. **Verifique presenÃ§a:** Use `analise_presenca_deputado(id=ID)` para contextualizar gastos com frequÃªncia no trabalho.\n\n3. **Compare com mÃ©dia:** Calcule mÃ©dia de gastos do partido/UF para identificar outliers.\n\n4. **Analise fornecedores:** Fornecedores que aparecem muito ou com valores altos merecem destaque.\n\n### Perguntas investigativas que vocÃª pode responder:\n- \"Quais deputados mais gastam com divulgaÃ§Ã£o?\"\n- \"HÃ¡ deputados que gastam muito mas faltam Ã s votaÃ§Ãµes?\"\n- \"Quais os fornecedores mais frequentes de um deputado?\"\n- \"Como os gastos se comparam entre partidos?\"\n- \"Houve aumento de gastos em perÃ­odo eleitoral?\"\n\n---\n\n**Lembre-se:** VocÃª Ã© um auditor imparcial. Apresente os dados de forma objetiva, sem julgamentos polÃ­ticos, mas destacando valores que pareÃ§am fora do comum ou mereÃ§am atenÃ§Ã£o do cidadÃ£o.\n",
          "maxIterations": 20
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        256,
        528
      ],
      "id": "b98b86e5-7862-4c67-9546-ec58fb6e10ef",
      "name": "Agente Fiscal"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "claude-sonnet-4-5-20250929",
          "cachedResultName": "Claude Sonnet 4.5"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatAnthropic",
      "typeVersion": 1.3,
      "position": [
        336,
        -320
      ],
      "id": "f4966f4d-31f2-49e8-a5eb-2ba3644e65b5",
      "name": "Anthropic Chat Model3",
      "credentials": {
        "anthropicApi": {
          "id": "yza3FCZS6Qw29DDQ",
          "name": "Anthropic account"
        }
      }
    },
    {
      "parameters": {
        "numberInputs": 3
      },
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3.2,
      "position": [
        544,
        288
      ],
      "id": "5771c669-3a35-4aa5-a0ef-d737f353749e",
      "name": "Merge"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=Pergunta original: {{ $('Webhook Chat').item.json.body.record.content }}\n\nAnÃ¡lises recebidas: {{ JSON.stringify($('Merge').all(), null, 2) }}",
        "options": {
          "systemMessage": "=VocÃª Ã© o Consolidador do Agente CidadÃ£o.\n\nFormate a saida no formato Markdown\n\nDATA ATUAL: {{ $now.toFormat('dd/MM/yyyy') }}\nMISSÃƒO:\nReceber as anÃ¡lises dos agentes especialistas e entregar uma resposta FINAL ao cidadÃ£o.\nENTRADA:\nVocÃª receberÃ¡ um JSON com as respostas dos agentes (Fiscal, PolÃ­tico, Legislativo).\nREGRAS:\n1. Se os agentes fornecerem uma LISTA de itens (ex: lista de projetos de lei, lista de despesas), VOCÃŠ DEVE APRESENTAR A LISTA COMPLETA. NÃƒO RESUMA LISTAS.\n2. Se for uma explicaÃ§Ã£o textual, seja direto e fluido.\n3. Se um agente disse \"NÃ£o encontrei dados\", avise o usuÃ¡rio claramente.\n4. Se todos os agentes falharem, peÃ§a desculpas e sugira reformular a pergunta.\n5. IGNORE limites de parÃ¡grafos se precisar listar muitos itens. O usuÃ¡rio quer ver todos os resultados encontrados.\n6. Caso algum sinta falta de informaÃ§Ã£o ou necessite de mais alguma informaÃ§Ã£o para completar a sua resposta vc pode usar o mcp para buscar e complementar o que for necessÃ¡rio.\nESTRUTURA:\n1. SaudaÃ§Ã£o rÃ¡pida.\n2. Resposta direta Ã  pergunta (apresentando listas completas se houver).\n3. ConclusÃ£o/PrÃ³ximo passo.\n\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        832,
        -448
      ],
      "id": "5a7d71d4-08d1-4f37-9fed-61c3fe426044",
      "name": "Sintetizador"
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={{ $json.output }}",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        1712,
        48
      ],
      "id": "b7a682aa-4c63-4a3a-9e68-a50413f00733",
      "name": "Respond to Webhook"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "adc36401-eb50-4987-aa20-d0564109aa33",
              "name": "agents",
              "value": "={{ $('Orquestador').item.json.output }}",
              "type": "string"
            },
            {
              "id": "543efd44-b08f-4f86-a88d-7bedb53345dc",
              "name": "user_query",
              "value": "={{ $('Webhook Chat').item.json.body.record.content }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -480,
        272
      ],
      "id": "abb40951-4641-4a20-b2cb-4fe5f225f036",
      "name": "Edit Fields"
    },
    {
      "parameters": {
        "jsCode": "const text = $input.item.json.agents;\n\n// Extrai o JSON entre as chaves\nconst start = text.indexOf('{');\nconst end = text.lastIndexOf('}') + 1;\nconst jsonString = text.substring(start, end);\n\nconst parsed = JSON.parse(jsonString);\n\nreturn {\n  agentes: parsed.agentes[0], // Pega o primeiro agente do array\n  user_query: $input.item.json.user_query // JÃ¡ vem do nÃ³ anterior\n};\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -320,
        112
      ],
      "id": "debc76c8-332f-4e52-9184-5890763d5345",
      "name": "Code in JavaScript"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "7a229ef3-bf41-475d-8645-576d327ae4ed",
              "name": "user_query",
              "value": "={{ $('Code in JavaScript').first().json.user_query }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        96,
        528
      ],
      "id": "eec2ace5-336e-46d6-a2cf-ed99caa1c30a",
      "name": "Edit Fields1"
    },
    {
      "parameters": {
        "endpointUrl": "https://agentecidadaomcp-production.up.railway.app/mcp",
        "include": "selected",
        "includeTools": [
          "buscar_deputados",
          "despesas_deputado",
          "detalhar_deputado",
          "analise_despesas_partido",
          "buscar_proposicoes",
          "analise_presenca_deputado",
          "discursos_deputado"
        ],
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.mcpClientTool",
      "typeVersion": 1.2,
      "position": [
        528,
        768
      ],
      "id": "d36fff16-097a-4bbd-b52e-0c9b2bc60bed",
      "name": "MCP Client2"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "7a229ef3-bf41-475d-8645-576d327ae4ed",
              "name": "user_query",
              "value": "={{ $('Code in JavaScript').first().json.user_query }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        80,
        256
      ],
      "id": "31b58f89-5755-4c29-8c2b-afca21a29eca",
      "name": "Edit Fields2"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "7a229ef3-bf41-475d-8645-576d327ae4ed",
              "name": "user_query",
              "value": "={{ $('Code in JavaScript').first().json.user_query }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        112,
        -48
      ],
      "id": "519091a0-2052-4b81-ad4c-d70193f5f048",
      "name": "Edit Fields3"
    },
    {
      "parameters": {
        "tableId": "agent_logs",
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": "request_id",
              "fieldValue": "={{ $json.body.record.id }}"
            },
            {
              "fieldId": "agent_name",
              "fieldValue": "Orquestrador"
            },
            {
              "fieldId": "status",
              "fieldValue": "working"
            },
            {
              "fieldId": "message",
              "fieldValue": "Analisando sua solicitaÃ§Ã£o..."
            }
          ]
        }
      },
      "id": "4a539c4c-a9ec-4a04-a8dd-42162235a22c",
      "name": "Orquestrador Log",
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        -1136,
        96
      ],
      "credentials": {
        "supabaseApi": {
          "id": "5y5XCrIlACcF46pQ",
          "name": "Supabase account"
        }
      }
    },
    {
      "parameters": {
        "tableId": "agent_logs",
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": "request_id",
              "fieldValue": "={{ $('Webhook Chat').item.json.body.record.id }}"
            },
            {
              "fieldId": "agent_name",
              "fieldValue": "Orquestrador"
            },
            {
              "fieldId": "status",
              "fieldValue": "completed"
            },
            {
              "fieldId": "message",
              "fieldValue": "OrquestraÃ§Ã£o concluÃ­da."
            }
          ]
        }
      },
      "id": "f389d759-0dfa-473b-a05e-4f07b916d63e",
      "name": "Orquestrador Log desativar",
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        -624,
        80
      ],
      "credentials": {
        "supabaseApi": {
          "id": "5y5XCrIlACcF46pQ",
          "name": "Supabase account"
        }
      }
    },
    {
      "parameters": {
        "tableId": "agent_logs",
        "fieldsUi": {
          "fieldValues": [
            {
              "fieldId": "request_id",
              "fieldValue": "={{ $('Webhook Chat').item.json.body.record.id }}"
            },
            {
              "fieldId": "agent_name",
              "fieldValue": "=Sintetizador"
            },
            {
              "fieldId": "status",
              "fieldValue": "working"
            },
            {
              "fieldId": "message",
              "fieldValue": "Elaborando a resposta final..."
            }
          ]
        }
      },
      "id": "d3b31ec7-689d-4863-854b-b6c20e190aea",
      "name": "Supabase: Consolidador",
      "type": "n8n-nodes-base.supabase",
      "typeVersion": 1,
      "position": [
        720,
        288
      ],
      "credentials": {
        "supabaseApi": {
          "id": "5y5XCrIlACcF46pQ",
          "name": "Supabase account"
        }
      }
    },
    {
      "parameters": {
        "model": "openai/gpt-4o-mini",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        -1104,
        304
      ],
      "id": "f11948b8-9931-4d79-95a0-623b1e9b23ef",
      "name": "OpenRouter Chat Model",
      "credentials": {
        "openRouterApi": {
          "id": "KfPQKoHTCcxjyL8z",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "model": "anthropic/claude-3.5-sonnet",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        224,
        96
      ],
      "id": "4c57ce18-afdf-4d7b-a7c5-37b2313df128",
      "name": "OpenRouter Chat Model1",
      "credentials": {
        "openRouterApi": {
          "id": "KfPQKoHTCcxjyL8z",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "model": "anthropic/claude-3.5-sonnet",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        224,
        400
      ],
      "id": "53fe8c7d-6826-46e2-b2c7-c907f6df5fc5",
      "name": "OpenRouter Chat Model2",
      "credentials": {
        "openRouterApi": {
          "id": "KfPQKoHTCcxjyL8z",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "model": "anthropic/claude-3-haiku",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        224,
        784
      ],
      "id": "3115c7e2-bf2d-499d-96b9-e0a52854f68f",
      "name": "OpenRouter Chat Model3",
      "credentials": {
        "openRouterApi": {
          "id": "KfPQKoHTCcxjyL8z",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "model": "google/gemini-2.5-flash",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        864,
        -224
      ],
      "id": "af783418-17f9-481d-899a-823c59cb2205",
      "name": "OpenRouter Chat Model4",
      "credentials": {
        "openRouterApi": {
          "id": "KfPQKoHTCcxjyL8z",
          "name": "OpenRouter account"
        }
      }
    },
    {
      "parameters": {
        "endpointUrl": "https://agentecidadaomcp-production.up.railway.app/mcp",
        "include": "selected",
        "includeTools": [
          "buscar_proposicoes",
          "detalhar_proposicao",
          "autores_proposicao",
          "tramitacoes_proposicao",
          "votacoes_proposicao",
          "relacionadas_proposicao",
          "temas_proposicao",
          "buscar_votacoes",
          "votos_votacao",
          "detalhar_votacao",
          "orientacoes_votacao",
          "ultimas_votacoes",
          "comparativo_votacoes_bancadas",
          "timeline_tramitacao",
          "ranking_proposicoes_autor",
          "sugerir_ferramentas",
          "diagnosticar_consulta",
          "tipos_proposicao",
          "buscar_deputados",
          "buscar_orgaos"
        ],
        "options": {
          "timeout": 60000
        }
      },
      "type": "@n8n/n8n-nodes-langchain.mcpClientTool",
      "typeVersion": 1.2,
      "position": [
        544,
        80
      ],
      "id": "5978e885-0a3c-4ca1-b3bc-cc5b23f309d6",
      "name": "MCP Client3"
    },
    {
      "parameters": {
        "endpointUrl": "https://agentecidadaomcp-production.up.railway.app/mcp",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.mcpClientTool",
      "typeVersion": 1.2,
      "position": [
        1136,
        -144
      ],
      "id": "d839efd9-7c55-4d10-a06d-7d06dbb7c95e",
      "name": "MCP Client"
    }
  ],
  "pinData": {},
  "connections": {
    "Webhook Chat": {
      "main": [
        [
          {
            "node": "Orquestrador Log",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Router": {
      "main": [
        [
          {
            "node": "Log: Leg Start",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Log: Pol Start",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Log: Fis Start",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Log: Leg Start": {
      "main": [
        [
          {
            "node": "Edit Fields3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Log: Pol Start": {
      "main": [
        [
          {
            "node": "Edit Fields2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Log: Fis Start": {
      "main": [
        [
          {
            "node": "Edit Fields1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Anthropic Chat Model1": {
      "ai_languageModel": [
        []
      ]
    },
    "Anthropic Chat Model2": {
      "ai_languageModel": [
        []
      ]
    },
    "MCP Client1": {
      "ai_tool": [
        [
          {
            "node": "Agente PolÃ­tico",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Orquestador": {
      "main": [
        [
          {
            "node": "Orquestrador Log desativar",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Agente Legislativo": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Anthropic Chat Model3": {
      "ai_languageModel": [
        []
      ]
    },
    "Agente Fiscal": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 2
          }
        ]
      ]
    },
    "Agente PolÃ­tico": {
      "main": [
        [
          {
            "node": "Merge",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "Merge": {
      "main": [
        [
          {
            "node": "Supabase: Consolidador",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Sintetizador": {
      "main": [
        [
          {
            "node": "Supabase: Final Update",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Supabase: Final Update": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "Router",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields1": {
      "main": [
        [
          {
            "node": "Agente Fiscal",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "MCP Client2": {
      "ai_tool": [
        [
          {
            "node": "Agente Fiscal",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields2": {
      "main": [
        [
          {
            "node": "Agente PolÃ­tico",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields3": {
      "main": [
        [
          {
            "node": "Agente Legislativo",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Orquestrador Log": {
      "main": [
        [
          {
            "node": "Orquestador",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Orquestrador Log desativar": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Supabase: Consolidador": {
      "main": [
        [
          {
            "node": "Sintetizador",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenRouter Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Orquestador",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "OpenRouter Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "Agente Legislativo",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "OpenRouter Chat Model2": {
      "ai_languageModel": [
        [
          {
            "node": "Agente PolÃ­tico",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "OpenRouter Chat Model3": {
      "ai_languageModel": [
        [
          {
            "node": "Agente Fiscal",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "OpenRouter Chat Model4": {
      "ai_languageModel": [
        [
          {
            "node": "Sintetizador",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "MCP Client3": {
      "ai_tool": [
        [
          {
            "node": "Agente Legislativo",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "MCP Client": {
      "ai_tool": [
        [
          {
            "node": "Sintetizador",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "97d2f086-d87f-4c28-a635-d17dc76a45c0",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "47c0851f3c62960484133b2e05ab8fb867cdf9e457bce7861d8db6cc8982ffba"
  },
  "id": "KfG18yoo9n7C0odE",
  "tags": []
}